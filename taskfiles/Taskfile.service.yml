# ============================================================================
# GENERATED FILE - DO NOT EDIT MANUALLY
# ============================================================================
# Generated by: xplat gen service
# Regenerate with: xplat gen service --force
# Source: https://github.com/joeblew999/xplat
# ============================================================================
#
# Reusable service taskfile for remote inclusion by xplat consumers.
# Consumers include this via: xplat pkg install xplat
#
# Provides standardized service management tasks (start, stop, status)
# that work with the xplat binary installed by xplat.
# ============================================================================

version: "3"

vars:
  XPLAT_BIN: '{{ .XPLAT_BIN | default "xplat" }}'
  XPLAT_PORT: '{{ .XPLAT_PORT | default "8080" }}'
  XPLAT_HOST: '{{ .XPLAT_HOST | default "0.0.0.0" }}'

tasks:
  start:
    desc: Start the xplat service
    cmds:
      - '{{ .XPLAT_BIN }} serve --port {{ .XPLAT_PORT }} --host {{ .XPLAT_HOST }}'

  stop:
    desc: Stop the xplat service
    cmds:
      - pkill -f "{{ .XPLAT_BIN }} serve" || true

  status:
    desc: Check if xplat service is running
    cmds:
      - |
        if pgrep -f "{{ .XPLAT_BIN }} serve" > /dev/null; then
          echo "xplat: running"
        else
          echo "xplat: not running"
          exit 1
        fi

  restart:
    desc: Restart the xplat service
    cmds:
      - task: stop
      - task: start
