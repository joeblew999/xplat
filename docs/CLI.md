# CLI Reference

Complete reference for all xplat commands.

*Auto-generated by `xplat internal docs cli`*

## Core

### `xplat gen`

Generate project files from YOUR local xplat.yaml

```
Generate project files from your local xplat.yaml manifest.

Use this to generate standard project files based on YOUR project's manifest.
This reads xplat.yaml in the current directory and creates files like
CI workflows, .gitignore, .env.example, etc.

Compare with:
  - 'xplat pkg' installs packages from the REMOTE registry
  - 'xplat manifest' inspects/validates manifests without generating

Examples:
  xplat gen workflow     # Generate .github/workflows/ci.yml
  xplat gen gitignore    # Generate .gitignore
  xplat gen env          # Generate .env.example
  xplat gen taskfile     # Generate Taskfile with remote includes
  xplat gen process      # Generate process-compose.yaml
  xplat gen all          # Generate all of the above
```

**Subcommands:**

| Command | Description |
|---------|-------------|
| `gen all` | Generate all files from manifest |
| `gen env` | Generate .env.example |
| `gen gitignore` | Generate .gitignore |
| `gen process` | Generate pc.generated.yaml with processes from installed packages |
| `gen service` | Generate taskfiles/Taskfile.service.yml for package consumers |
| `gen taskfile` | Generate Taskfile.generated.yml with remote includes from installed packages |
| `gen workflow` | Generate .github/workflows/ci.yml |

### `xplat manifest`

Inspect, validate, and bootstrap xplat.yaml manifests

```
Inspect, validate, and bootstrap xplat.yaml manifests.

Use this to:
  - Validate manifest syntax and references
  - View manifest contents
  - Discover manifests across repos
  - Bootstrap new projects with standard files
  - Install binaries defined in manifests

Compare with:
  - 'xplat gen' generates files FROM your manifest (workflow, gitignore, etc.)
  - 'xplat pkg' installs packages from the REMOTE registry
```

**Subcommands:**

| Command | Description |
|---------|-------------|
| `manifest bootstrap` | Bootstrap a plat-* repository with standard files |
| `manifest check` | Deep validation of manifest against filesystem |
| `manifest discover` | Discover manifests in plat-* directories |
| `manifest discover-github` | Discover manifests from GitHub plat-* repos |
| `manifest init` | Initialize a new xplat.yaml manifest |
| `manifest install` | Install binary from manifest |
| `manifest install-all` | Install binaries from all discovered manifests |
| `manifest show` | Show manifest details |
| `manifest validate` | Validate an xplat.yaml manifest |

### `xplat process`

Process orchestration (embedded process-compose)

```
Manage long-running processes using the embedded process-compose (v1.87.0).

This provides the same functionality as the standalone 'process-compose'
binary, but bundled into xplat for a unified developer experience.

Commands:
  (no subcommand)      Start processes with TUI (default)
  up                   Start all processes
  down                 Stop all running processes
  graph                Display dependency graph (ascii/mermaid/json/yaml)
  logs <process>       View logs for a process
  list                 List all processes with status
  restart <process>    Restart a specific process
  attach               Attach TUI to running server
  info                 Show process-compose info
  recipe               Manage community recipes
  run <process>        Run single process in foreground
  tools                xplat-specific tooling (lint, fmt)

New in v1.87.0:
  - Dependency Graph: visualize process dependencies
    CLI: xplat process graph -f mermaid
    TUI: Press Ctrl+Q to open graph view
    API: GET /graph
  - Scheduled Processes: cron and interval-based execution
    schedule.cron: "0 2 * * *"     # cron expression
    schedule.interval: "30s"        # Go duration
    schedule.run_on_start: true     # run immediately
    schedule.timezone: "UTC"        # for cron
  - TUI: mouse support, configurable escape character

Examples:
  xplat process                        # Start with TUI
  xplat process up hugo                # Start specific process
  xplat process -f custom.yaml         # Use custom config file
  xplat process logs mailerlite        # View logs
  xplat process down                   # Stop all processes
  xplat process list -o wide           # List with details
  xplat process graph                  # ASCII dependency tree
  xplat process graph -f mermaid       # Mermaid diagram for docs
  xplat process graph -f json          # JSON for tooling
  xplat process tools lint             # Lint config files
  xplat process tools fmt              # Format config files

Config files (searched in order):
  - pc.generated.yaml (generated by xplat manifest gen-process)
  - pc.yaml
  - pc.yml
  - process-compose.generated.yaml
  - process-compose.yaml
  - process-compose.yml
```

**Subcommands:**

| Command | Description |
|---------|-------------|
| `process demo` | Run demo fixtures to explore process-compose features |
| `process tools` | Process-compose validation and formatting tools |

### `xplat run`

Run a managed tool

```
Execute a tool found via xplat conventions.

Finds the tool using the same logic as 'xplat which':
  1. Check Taskfiles for install location vars
  2. Fall back to convention locations (~/.bun/bin/, ~/.local/bin/)
  3. Fall back to PATH

This allows users to run any xplat-managed tool without
modifying their shell configuration.

Examples:
  xplat run wrangler --version
  xplat run dummy --help
  xplat run go version
```

### `xplat task`

Run Taskfile tasks (embedded Task runner)

```
Runs Taskfile tasks using the embedded Task runner.

This provides the same functionality as the standalone 'task' binary,
but bundled into xplat for simpler bootstrapping.

Examples:
  xplat task build
  xplat task -t taskfiles/Taskfile.dummy.yml release:build
  xplat task --list
  xplat task build -- --some-arg-for-task
```

**Subcommands:**

| Command | Description |
|---------|-------------|
| `task tools` | Taskfile validation and formatting tools |

### `xplat up`

Start the unified xplat web UI

```
Start the unified xplat web interface with all features enabled.

This is the primary way to run xplat's web UI. It provides:
  - Dashboard: Overview of your project
  - Tasks: Run Taskfile tasks with live output
  - Processes: Monitor process-compose processes
  - Setup: Configure environment and services

The UI is driven by your project's configuration (Taskfile.yml, process-compose.yaml).

Examples:
  xplat up                     # Start with all features on port 8760
  xplat up -p 9000             # Start on port 9000
  xplat up --no-browser        # Don't open browser (for service mode)
  xplat up --no-setup          # Disable setup wizard
  xplat up -d /path/to/project # Use specific project directory
```

### `xplat update`

Update xplat to the latest version

```
Update xplat to the latest version from GitHub releases.

Examples:
  xplat update           # Update to latest version
  xplat update --check   # Check for updates without installing
  xplat update --force   # Force reinstall even if up to date
```

### `xplat version`

Print xplat version

```
Print xplat version information.

Examples:
  xplat version         # Show version
  xplat version -v      # Show verbose info with update check
```

## Package Management

### `xplat binary`

Binary management commands

```
Commands for managing binary tool installation.

Provides a centralized way to install binaries that:
- First checks if the binary already exists (PATH or install dir)
- Builds from local source if Go is available
- Downloads from GitHub releases as fallback
```

**Subcommands:**

| Command | Description |
|---------|-------------|
| `binary install` | Install a binary (build from source or download) |

### `xplat pkg`

Install packages from REMOTE registry (binaries, taskfiles, processes)

```
Install and manage packages from the Ubuntu Software registry.

Use this to install pre-built packages from the REMOTE registry.
Each package can include:
- A CLI binary (installed to ~/.local/bin)
- A remote Taskfile include (added to your Taskfile.yml)
- A process configuration (added to process-compose.yaml)

Compare with:
  - 'xplat gen' generates files from YOUR LOCAL xplat.yaml
  - 'xplat manifest' inspects/validates manifests

The registry is hosted at https://www.ubuntusoftware.net/pkg/registry.json

For local development/testing, set XPLAT_REGISTRY_URL:
  export XPLAT_REGISTRY_URL=http://localhost:1313/pkg/registry.json

Examples:
  xplat pkg list                    # List available packages
  xplat pkg info mailerlite         # Show package details
  xplat pkg install mailerlite      # Install binary + add taskfile
  xplat pkg install mailerlite --with-process  # Also add to process-compose.yaml
  xplat pkg remove mailerlite       # Remove binary + taskfile include
```

**Subcommands:**

| Command | Description |
|---------|-------------|
| `pkg add-process` | Add a package's process to process-compose.yaml |
| `pkg info` | Show package details |
| `pkg install` | Install a package (binary + taskfile) |
| `pkg list` | List available packages |
| `pkg list-processes` | List packages with process configurations |
| `pkg remove` | Remove a package (binary + taskfile include) |
| `pkg remove-process` | Remove a package's process from process-compose.yaml |

## Process

### `xplat release`

Release build orchestration

```
Commands for orchestrating cross-platform release builds.

Reads tool configuration from Taskfiles to determine build strategy:
- CGO=0: Can cross-compile all platforms from any OS
- CGO=1: Requires native build on each target platform

Examples:
  xplat release matrix tui          # Output platform matrix as JSON
  xplat release build tui           # Build for all platforms
  xplat release build tui --current # Build for current platform only
```

**Subcommands:**

| Command | Description |
|---------|-------------|
| `release binary-name` | Print binary filename for current platform |
| `release build` | Build a tool for release |
| `release list` | List built release binaries for a tool |
| `release matrix` | Output platform build matrix for a tool |

### `xplat service`

Manage xplat as a system service

```
Manage xplat as a system service that runs all registered projects.

One global xplat service runs all projects from the registry.
Use 'install' from each project directory to add it to the registry.
Use 'config' to configure UI, MCP, and sync settings once.

On macOS: LaunchAgent (user service)
On Linux: systemd user service
On Windows: Windows service

Examples:
  cd ~/project1 && xplat service install  # Add project to registry
  xplat service config --ui --sync        # Enable UI and sync (configure once)
  xplat service start                      # Start THE service
  xplat service status                     # Check service status
```

**Subcommands:**

| Command | Description |
|---------|-------------|
| `service config` | Configure service settings |
| `service install` | Add current project to registry and install OS service |
| `service list` | List all registered projects |
| `service restart` | Restart the xplat service |
| `service start` | Start the xplat service |
| `service status` | Check service status |
| `service stop` | Stop the xplat service |
| `service uninstall` | Remove current project from registry |

## Sync

### `xplat sync-cf`

Cloudflare sync operations (no wrangler CLI required)

```
Cloudflare sync operations - no wrangler CLI needed.

Works identically on macOS, Linux, and Windows.
Designed to run as part of xplat service for continuous syncing.

Commands:
  receive        Receive events from CF Worker (round-trip validation)
  receive-state  Show current receive state
  auth           Set up R2 credentials interactively
  tunnel         Start cloudflared tunnel (quick or named)
  tunnel-login   Authenticate cloudflared with Cloudflare
  tunnel-list    List existing named tunnels
  tunnel-create  Create a new named tunnel
  tunnel-delete  Delete a named tunnel
  tunnel-route   Add DNS route for a tunnel
  poll           Poll CF audit logs continuously
  webhook        Start CF webhook server
  check          Check if cloudflared is installed
  install        Install cloudflared
  worker         Deploy sync-cf worker to Cloudflare edge

Environment:
  CF_ACCOUNT_ID       Cloudflare account ID
  CF_API_TOKEN        Cloudflare API token
  R2_ACCESS_KEY       R2 API access key
  R2_SECRET_KEY       R2 API secret key

Round-Trip Validation (recommended):
  1. Deploy CF Worker:  xplat sync-cf worker deploy
  2. Start receiver:    xplat sync-cf receive --port=9091
  3. Start tunnel:      xplat sync-cf tunnel 9091
  4. Configure SYNC_ENDPOINT on Worker to tunnel URL

Quick Tunnel (random URL, no account needed):
  xplat sync-cf tunnel 8080

Named Tunnel (stable URL, requires CF account + domain):
  1. xplat sync-cf tunnel-login           # One-time: authenticate
  2. xplat sync-cf tunnel-create webhook  # One-time: create tunnel
  3. xplat sync-cf tunnel-route webhook webhook.yourdomain.com
  4. xplat sync-cf tunnel --name=webhook  # Run with stable URL

Examples:
  xplat sync-cf receive --port=9091
  xplat sync-cf auth
  xplat sync-cf check
  xplat sync-cf tunnel 8080
  xplat sync-cf tunnel --name=webhook --port=8080
  xplat sync-cf poll --interval=1m
  xplat sync-cf webhook --port=9090
  xplat sync-cf worker deploy
```

**Subcommands:**

| Command | Description |
|---------|-------------|
| `sync-cf auth` | Set up Cloudflare credentials interactively |
| `sync-cf check` | Check if cloudflared is installed |
| `sync-cf install` | Install cloudflared |
| `sync-cf poll` | Poll CF audit logs continuously |
| `sync-cf receive` | Receive events from CF Worker (round-trip validation) |
| `sync-cf receive-state` | Show current receive state (processed events) |
| `sync-cf tunnel` | Start cloudflared tunnel (quick or named) |
| `sync-cf tunnel-create` | Create a new named tunnel |
| `sync-cf tunnel-delete` | Delete a named tunnel |
| `sync-cf tunnel-list` | List existing named tunnels |
| `sync-cf tunnel-login` | Authenticate cloudflared with Cloudflare |
| `sync-cf tunnel-route` | Add DNS route for a tunnel |
| `sync-cf webhook` | Start CF webhook server |
| `sync-cf worker` | Manage sync-cf Cloudflare Worker |

### `xplat sync-gh`

GitHub sync operations (no gh CLI required)

```
GitHub sync operations using go-github - no gh CLI needed.

Works identically on macOS, Linux, and Windows.
Designed to run as part of xplat service for continuous syncing.

Quick Start (zero config real-time sync):
  xplat sync-gh relay
  # Then configure GitHub webhook to POST to the displayed tunnel URL

Commands:
  relay       Start webhook relay with CF tunnel (easiest setup)
  poll        Poll for updates continuously (no webhook needed)
  webhook     Start webhook server only
  sse-client  Connect to gosmee server for SSE relay
  state       Capture/display GitHub repo state
  release     Get latest release tag for a repo
  discover    Find repos from Taskfile.yml remote includes

Environment:
  GITHUB_TOKEN    GitHub token for API (increases rate limit 60â†’5000/hour)

Sync Methods:

  1. RELAY (recommended for development):
     xplat sync-gh relay
     - Starts webhook server + Cloudflare tunnel in one command
     - URL changes on restart (quick tunnel)

  2. POLLING (simplest, no webhooks):
     xplat sync-gh poll --interval=5m --invalidate
     - No setup required, just polls GitHub API
     - 5 minute delay between updates

  3. SSE CLIENT (for production with gosmee):
     xplat sync-gh sse-client https://webhook.example.com/abc123 --invalidate
     - Requires gosmee server with stable URL
     - Best for persistent connections with event replay

Examples:
  xplat sync-gh relay                    # Quick start with tunnel
  xplat sync-gh poll --invalidate        # Simple polling
  xplat sync-gh release nats-io/nats-server
```

**Subcommands:**

| Command | Description |
|---------|-------------|
| `sync-gh discover` | Discover GitHub repos from Taskfile.yml remote includes |
| `sync-gh poll` | Poll repositories for updates continuously |
| `sync-gh poll-state` | Show current poll state (tracked repos and commit hashes) |
| `sync-gh relay` | Start webhook relay with Cloudflare tunnel (zero config real-time sync) |
| `sync-gh release` | Get latest release tag for a repository |
| `sync-gh replay` | Replay webhook deliveries from GitHub API |
| `sync-gh server` | Start a gosmee-compatible SSE server for webhook relay |
| `sync-gh sse-client` | Connect to a gosmee server and forward events to local webhook handler |
| `sync-gh state` | Capture or display GitHub repository state |
| `sync-gh webhook` | Start webhook server |
| `sync-gh webhook-add` | Configure a GitHub repo to send webhooks to a URL |
| `sync-gh webhook-delete` | Delete a webhook from a GitHub repo |
| `sync-gh webhook-list` | List webhooks configured on a GitHub repo |

## Development

### `xplat docs`

Documentation commands (serve, build)

```
Documentation commands for local preview and static site generation.

Subcommands:
  serve  - Start local server for live preview
  build  - Generate static HTML for GitHub Pages

Examples:
  xplat docs serve           # Live preview on port 8764
  xplat docs build           # Generate _site/ for GitHub Pages
  xplat docs build -o dist   # Custom output directory
```

**Subcommands:**

| Command | Description |
|---------|-------------|
| `docs build` | Build static HTML for GitHub Pages |
| `docs serve` | Serve docs locally (live preview) |

### `xplat os`

Cross-platform OS utilities

```
Cross-platform OS utilities that work identically on macOS, Linux, and Windows.

These utilities are designed to fill gaps in Task's built-in shell interpreter
and provide consistent behavior across all platforms.

File Operations:
  cat      - Print file contents
  cp       - Copy files or directories
  mkdir    - Create directories
  mv       - Move or rename files and directories
  rm       - Remove files or directories
  touch    - Create files or update timestamps

Environment & Text:
  env      - Get environment variable
  envsubst - Substitute environment variables in text
  glob     - Expand glob pattern
  jq       - Process JSON with jq syntax

Version Control:
  git      - Git operations (no git binary required)

Archives & Downloads:
  extract  - Extract archives (zip, tar.gz, etc.)
  fetch    - Download files with optional extraction

Tools:
  which    - Find binary in managed locations or PATH
  version-file - Read/write .version file

Examples:
  xplat os cat file.txt
  xplat os cp src dst -r
  xplat os envsubst --env-file .env template.yml
  xplat os glob "**/*.go"
  xplat os which go
  xplat os fetch https://example.com/file.tar.gz
```

**Subcommands:**

| Command | Description |
|---------|-------------|
| `os cat` | Print file contents |
| `os cp` | Copy files or directories |
| `os env` | Get environment variable |
| `os envsubst` | Substitute environment variables in text |
| `os exists` | Check if file or directory exists |
| `os extract` | Extract archives (zip, tar.gz, tar.bz2, tar.xz, 7z, rar) |
| `os fetch` | Download files with optional archive extraction |
| `os git` | Git operations (no git binary required) |
| `os glob` | Expand glob pattern |
| `os jq` | Process JSON with jq syntax |
| `os mkdir` | Create directories |
| `os mv` | Move or rename files and directories |
| `os rm` | Remove files or directories |
| `os touch` | Create files or update timestamps |
| `os version-file` | Read or write .version file |
| `os which` | Find binary in managed locations or PATH |

## Other

### `xplat internal`

xplat developer commands (not for end users)

```
Commands for xplat developers only.

If you're working in a plat-* repo, use 'xplat gen' instead.

Subcommands:
  internal:docs    Generate xplat's own documentation
  internal:dev     Developer utilities (install, build, etc.)
  internal:gen     Generate xplat's own CI/install scripts
```

**Subcommands:**

| Command | Description |
|---------|-------------|
| `internal dev` | Developer utilities for xplat development |
| `internal docs` | Generate xplat's own documentation (for xplat developers) |
| `internal gen` | Generate xplat's own CI/install scripts from config |

### `xplat mcp`

MCP (Model Context Protocol) server

```
Provides an MCP server that exposes Taskfile tasks as tools for AI assistants.

This allows AI IDEs like Claude Desktop, Cursor, Windsurf, etc. to discover
and execute your Taskfile tasks directly.

Examples:
  xplat mcp serve              # Start MCP server (stdio)
  xplat mcp list               # List tasks that would be exposed
  xplat mcp config             # Show config for AI IDEs
```

**Subcommands:**

| Command | Description |
|---------|-------------|
| `mcp config` | Show MCP configuration for AI IDEs |
| `mcp list` | List tasks that would be exposed as MCP tools |
| `mcp serve` | Start MCP server (stdio or HTTP transport) |

### `xplat setup`

Environment configuration wizard

```
Guided setup wizard for configuring external services.

The setup wizard provides a web UI for configuring:
- Cloudflare (API tokens, Pages, Workers, Tunnels)
- Claude AI (API keys for translation)
- Other external service integrations

Configuration is saved to .env file (git-ignored).

Examples:
  xplat setup wizard       # Launch web-based setup wizard
  xplat setup wizard --mock  # Launch in mock mode (no real API calls)
  xplat setup check        # Validate current configuration
  xplat setup status       # Show what's configured vs missing
```

**Subcommands:**

| Command | Description |
|---------|-------------|
| `setup check` | Validate current environment configuration |
| `setup status` | Show environment configuration status |
| `setup wizard` | Launch web-based environment setup wizard |

### `xplat ui`

Start Task UI web interface (use 'xplat up' for unified UI)

```
Start a web-based UI for running Taskfile tasks.

DEPRECATED: This command is deprecated. Use 'xplat up' instead for the unified UI.

The UI provides:
  - List of all available tasks from Taskfile.yml
  - Click-to-run task execution with live output
  - Process-compose status view (if running)

Examples:
  xplat up                      # Unified UI (recommended)
  xplat ui                      # Legacy: Start on port 8760
  xplat ui -p 9000              # Start on port 9000
  xplat ui --no-browser         # Don't open browser
```

