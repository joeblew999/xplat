# xplat TODO

## Registry Migration

Currently the package registry is generated by Hugo in ubuntu-website:
- Source: `content/english/pkg/*.md` (frontmatter defines package metadata)
- Template: `layouts/pkg/list.packageregistry.json`
- Output: `https://www.ubuntusoftware.net/pkg/registry.json`

### Options

#### Option 1: Keep in Hugo (current)
- Pros: Already works, website shows package docs
- Cons: Metadata duplicated if packages move to plat-* repos

#### Option 2: Move registry to xplat
- Each plat-* repo has `xplat.yaml` with metadata
- xplat aggregates (scan local or fetch from GitHub)
- Pros: Single source of truth in each repo
- Cons: More work to implement

#### Option 3: Static registry file
- Maintain `registry.json` directly in xplat repo
- Pros: Simple, no external dependencies
- Cons: Manual updates

#### Option 4: GitHub-based registry
- Each plat-* repo has `.xplat/package.yaml`
- xplat fetches via GitHub API
- Pros: Truly distributed, repos own their metadata
- Cons: Complex, GitHub API rate limits

### Missing Features

- [ ] **Env vars in registry** - packages should declare required env vars
  - Add `env_vars` to Package type
  - Add to Hugo template
  - Add `xplat docs env` to generate `.env.example`

## Packages to Move Out

These packages currently live in ubuntu-website and should move to plat-* repos:

- [ ] mailerlite → plat-mailerlite
- [ ] google → plat-google
- [ ] google-mcp-server → (already separate repo)
- [ ] cli → plat-cli (shared CLI framework)

## Docs Generation

Current `xplat docs` generates:
- `README.md` - from Cobra commands
- `Taskfile.generated.yml` - wrapper tasks for all xplat commands
- `process-compose.generated.yaml` - from registry packages with process configs

Future:
- [ ] `xplat docs env` - generate `.env.example` from registry
- [ ] Better README formatting (usage examples, flags)
